(window.webpackJsonp=window.webpackJsonp||[]).push([[146],{570:function(e,n,t){"use strict";t.r(n);var c=t(62),f=Object(c.a)({},(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("p",[e._v("//响应式酷")]),e._v(" "),t("p",[e._v("// 依赖\nlet currentEffect;")]),e._v(" "),t("p",[e._v("// 响应式\nclass Dep {\nconstructor(val) {\nthis.effects = new Set();\nthis._val = val;\n}")]),e._v(" "),t("p",[e._v("get value() {\nthis.depend();\nreturn this._val;\n}")]),e._v(" "),t("p",[e._v("set value(newVal) {\nthis._val = newVal;\n}")]),e._v(" "),t("p",[e._v("// 收集依赖\ndepend() {\nif (currentEffect) {\nthis.effects.add(currentEffect);\n}\n}")]),e._v(" "),t("p",[e._v("// 出发依赖\nnotice() {\nthis.effects.forEach((effect) => {\neffect();\n});\n}\n}")]),e._v(" "),t("p",[e._v("function effectWatch(effect) {\n// 收集依赖\ncurrentEffect = effect;\neffect();\ndep.depend();\ncurrentEffect = null;\n}")]),e._v(" "),t("p",[e._v("const dep = new Dep();")]),e._v(" "),t("p",[e._v("let b;")]),e._v(" "),t("p",[e._v("effectWatch(() => {\nb = dep.value + 10;\nconsole.log(b);\n});")]),e._v(" "),t("p",[e._v("// 值发生变更\ndep.value = 20;\n// dep.notice();")])])}),[],!1,null,null,null);n.default=f.exports}}]);