(window.webpackJsonp=window.webpackJsonp||[]).push([[182],{608:function(s,e,a){"use strict";a.r(e);var n=a(62),t=Object(n.a)({},(function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"vue3-0-源码结构分析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue3-0-源码结构分析"}},[s._v("#")]),s._v(" Vue3.0 源码结构分析")]),s._v(" "),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#vue2-与-vue3-的对比"}},[s._v("Vue2 与 Vue3 的对比")])]),a("li",[a("a",{attrs:{href:"#一-monorepo-介绍"}},[s._v("一.monorepo 介绍")])]),a("li",[a("a",{attrs:{href:"#二-lerna-介绍"}},[s._v("二.lerna 介绍")])]),a("li",[a("a",{attrs:{href:"#三-项目结构"}},[s._v("三.项目结构")])])])]),a("p"),s._v(" "),a("h2",{attrs:{id:"vue2-与-vue3-的对比"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue2-与-vue3-的对比"}},[s._v("#")]),s._v(" Vue2 与 Vue3 的对比")]),s._v(" "),a("ul",[a("li",[s._v("对 "),a("code",[s._v("TypeScript")]),s._v(" 支持不友好（所有属性都放在了 this 对象上，难以推倒组件的数据类型）")]),s._v(" "),a("li",[s._v("大量的 API 挂载在 Vue 对象的原型上，难以实现 TreeShaking。")]),s._v(" "),a("li",[s._v("架构层面对跨平台 dom 渲染开发支持不友好")]),s._v(" "),a("li",[a("code",[s._v("CompositionAPI")]),s._v("。受 ReactHook 启发")]),s._v(" "),a("li",[s._v("对虚拟 DOM 进行了重写、对模板的编译进行了优化操作...")])]),s._v(" "),a("h2",{attrs:{id:"一-monorepo-介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一-monorepo-介绍"}},[s._v("#")]),s._v(" 一.monorepo 介绍")]),s._v(" "),a("p",[a("code",[s._v("monorepo")]),s._v(" 是一种将多个 package 放在一个 repo 中的代码管理模式")]),s._v(" "),a("p",[s._v("Vue3 中 使用 "),a("code",[s._v("yarn workspace + lerna")]),s._v(" 来管理项目")]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"workspaces"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"packages/*"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("blockquote",[a("p",[s._v("通过 "),a("code",[s._v("workspaces")]),s._v(" 来指定需要管理的模块")])]),s._v(" "),a("h2",{attrs:{id:"二-lerna-介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二-lerna-介绍"}},[s._v("#")]),s._v(" 二.lerna 介绍")]),s._v(" "),a("p",[a("code",[s._v("lerna")]),s._v(" 是在 js 项目中用来管理多个 package 的工具")]),s._v(" "),a("ul",[a("li",[s._v("全局安装"),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" lerna -g\nlerna init\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[s._v("常用命令"),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("lerna bootstrap "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装依赖生成软链")]),s._v("\nlerna "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看所有包")]),s._v("\nlerna publish "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 发布包")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])])]),s._v(" "),a("h2",{attrs:{id:"三-项目结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三-项目结构"}},[s._v("#")]),s._v(" 三.项目结构")]),s._v(" "),a("ul",[a("li",[s._v("reactivity:响应式系统")]),s._v(" "),a("li",[s._v("runtime-core:与平台无关的运行时核心 (可以创建针对特定平台的运行时 - 自定义渲染器)")]),s._v(" "),a("li",[s._v("runtime-dom: 针对浏览器的运行时。包括 DOM API，属性，事件处理等")]),s._v(" "),a("li",[s._v("runtime-test:用于测试")]),s._v(" "),a("li",[s._v("server-renderer:用于服务器端渲染")]),s._v(" "),a("li",[s._v("compiler-core:与平台无关的编译器核心")]),s._v(" "),a("li",[s._v("compiler-dom: 针对浏览器的编译模块")]),s._v(" "),a("li",[s._v("compiler-ssr: 针对服务端渲染的编译模块")]),s._v(" "),a("li",[s._v("template-explorer：用于调试编译器输出的开发工具")]),s._v(" "),a("li",[s._v("shared：多个包之间共享的内容")]),s._v(" "),a("li",[s._v("vue:完整版本,包括运行时和编译器")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("                                    +---------------------+\n                                    |                     |\n                                    |  @vue/compiler-sfc  |\n                                    |                     |\n                                    +-----+--------+------+\n                                          |        |\n                                          v        v\n                      +---------------------+    +----------------------+\n                      |                     |    |                      |\n        +------------\x3e|  @vue/compiler-dom  +---\x3e|  @vue/compiler-core  |\n        |             |                     |    |                      |\n   +----+----+        +---------------------+    +----------------------+\n   |         |\n   |   vue   |\n   |         |\n   +----+----+        +---------------------+    +----------------------+    +-------------------+\n        |             |                     |    |                      |    |                   |\n        +------------\x3e|  @vue/runtime-dom   +---\x3e|  @vue/runtime-core   +---\x3e|  @vue/reactivity  |\n                      |                     |    |                      |    |                   |\n                      +---------------------+    +----------------------+    +-------------------+\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br")])])])}),[],!1,null,null,null);e.default=t.exports}}]);